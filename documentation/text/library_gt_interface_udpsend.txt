<h1>UDP Send</h1>
<h3>Library</h3>
<span style="font-family: Courier New">GenericTarget / Interface / UDP Send</span>

<h3>Description</h3>
Send a UDP message to a destination address that is specified via the destination input.
By default a message of zero-length is not sent. However, this option can be enabled in the advanced tab.
Internally, the target application uses a separate socket for each defined UDP port.
If the same local port is set in a UDP Send and Receive block, both blocks access the same socket in the background.
For this reason, the settings in the masks of the corresponding UDP Send and Receive blocks must be identical, otherwise the initialization phase of the target application will fail.
Values less than 1 can also be selected for the port in the block mask.
In this case, the actual UDP port is selected randomly by the operating system.
Nevertheless, all UDP Send and Receive blocks with the same value in the local port must have the identical mask settings.
If, for example, several UDP blocks have the local port -3, one common socket is used in the background whose current UDP port is randomly assigned by the operating system.


<h2>Input Ports</h2>
<h3>destinationAddress</h3>
A 4-dimensional vector indicating the destination IPv4 address.
<br>
<b>Data Type:</b> <span style="font-family: Courier New">uint8</span>

<h3>destinationPort</h3>
The destination port.
<br>
<b>Data Type:</b> <span style="font-family: Courier New">uint16</span>

<h3>bytes</h3>
A vector containing the message that should be sent.
<br>
<b>Data Type:</b> <span style="font-family: Courier New">uint8</span>

<h3>length</h3>
The number of bytes that should be sent. The length must not be greater than 65507.
<br>
<b>Data Type:</b> <span style="font-family: Courier New">uint32</span>


<h2>Output Ports</h2>
<h3>details</h3>
This output port is enabled, when checking the option <b>Show details output port</b> via the block mask.
<br>
<b>Data Type:</b> <span style="font-family: Courier New">Bus</span>
<br><br>
The bus contains the following values.
<br>
<table>
    <tr><th>Parameter Name</th><th>Data Type</th><th>Description</th></tr>
    <tr><td style="font-family: Courier New;">result</td><td style="font-family: Courier New;">int32</td><td>The value represents the number of bytes that have been sent or a negative value in case of errors.</td></tr>
    <tr><td style="font-family: Courier New;">lastErrorCode</td><td style="font-family: Courier New;">int32</td><td>The value indicates the last socket error code from sending a message. 0 means no error. The actual meaning of non-zero values depend on the operating system.</td></tr>
</table>


<h2>Block Parameters</h2>
The following table shows all block parameters.
<table>
    <tr><th>Parameter Name</th><th>Description</th></tr>
    <tr><td style="font-family: Courier New;">showDetails</td><td>Checkbox for showing the details output port.</td></tr>
    <tr><td style="font-family: Courier New;">localPort</td><td>Local port under the "Socket" tab.</td></tr>
    <tr><td style="font-family: Courier New;">deviceName</td><td>Device name under the "Socket" tab.</td></tr>
    <tr><td style="font-family: Courier New;">multicastTTL</td><td>Time-to-live value for outgoing multicast traffic under the "Multicast" tab.</td></tr>
    <tr><td style="font-family: Courier New;">multicastInterfaceAddress</td><td>IP address of the interface to be used for multicast traffic under the "Multicast" tab.</td></tr>
    <tr><td style="font-family: Courier New;">multicastAll</td><td>Checkbox for enabling the <code>IP_MULTICAST_ALL</code> socket option under the "Multicast" tab.</td></tr>
    <tr><td style="font-family: Courier New;">multicastLoop</td><td>Checkbox for enabling the <code>IP_MULTICAST_LOOP</code> socket option under the "Multicast" tab.</td></tr>
    <tr><td style="font-family: Courier New;">socketPriority</td><td>Socket priority under the "Advanced" tab.</td></tr>
    <tr><td style="font-family: Courier New;">allowBroadcast</td><td>Allow broadcast checkbox under the "Advanced" tab.</td></tr>
    <tr><td style="font-family: Courier New;">allowZeroLengthMessage</td><td>Allow sending zero-length message checkbox under the "Advanced" tab.</td></tr>
    <tr><td style="font-family: Courier New;">SampleTime</td><td>Sampletime.</td></tr>
</table>


<h2>Further Notes</h2>
<h3>Socket</h3>
A socket serves as the interface between an application and network hardware.
During model initialization, all UDP sockets are created, and socket options are configured.
However, binding to a local port and a specific network device occurs within a model's step function, ensuring compatibility even if the network interface is unavailable at startup.
The socket options <code>SO_REUSEPORT</code> and <code>SO_REUSEADDR</code> are enabled after socket creation, allowing multiple sockets (e.g., multiple blocks) to bind to the same port and device.

<h3>Port Range</h3>
Port numbers are categorized as follows:
<ul>
    <li><b>System Ports (1–1023):</b> Reserved for system processes and should not be used.</li>
    <li><b>User Ports (1024–49151):</b> Available for general use.</li>
    <li><b>Dynamic Ports (49152–65536):</b> Typically assigned dynamically, but availability may vary depending on the operating system.</li>
</ul>
In some cases, ports in the dynamic range may be restricted by the operating system.
If a port cannot be bound, it may already be in use or blocked by system policies.
Setting the local port to a value below 1 in the block mask allows the Generic Target to request a random local port, usually within the dynamic range.

<div class="note-orange">
<h3 class="note-orange">Application Port</h3>
The target application reserves a dedicated port (<a href="packages_gt_generictarget.html#portAppSocket">portAppSocket</a>) to prevent multiple instances from running simultaneously. This port is set via the <a href="packages_gt_generictarget.html">GT.GenericTarget</a> class and cannot be reused within the model.
</div>

<h3>Socket Priority</h3>
Socket priority is applicable only when running on a Linux operating system; it has no effect on Windows.
This value must be between <b>0 and 6</b> and determines the protocol-defined priority for outgoing packets.
Linux uses this setting to manage networking queues, ensuring that higher-priority packets are processed first based on the selected queuing discipline.

<h3>Allow Broadcast</h3>
If broadcasting is disabled, attempting to send a broadcast message will result in an error (a negative result output).
To enable broadcast transmission, select the corresponding checkbox in the block mask.

<h3>Allow Zero-length Messages</h3>
By default, UDP messages with an empty payload (zero-length) are not allowed.
If you need to send such messages, enable the corresponding checkbox in the block mask.

<h3>Time-to-Live (TTL)</h3>
When sending multicast messages, the <b>TTL (Time-to-Live)</b> value functions as a hop counter.
Each time a packet passes through a multicast routing device, its TTL value decreases by 1.
If it reaches zero, the routing device discards the message.

<br><br><br><br>

