<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Generic Target</title>
<link rel="stylesheet" href="core/design.css">

</head>
<body>
<header>
<div class="header_title">Generic Target</div>
<div class="header_version">Version 1.1.0</div>
</header>
<button onclick="PageToTop()" id="buttonToTop"></button>
<div class="wrapper">
<div class="navigation">
<ul class="ulnav">
<li class="linone"></li>
<li class="linav_active"><a href="index.html">Overview</a></li>
<li class="linone"></li>
<li class="litext">GETTING STARTED</li>
<li class="linav"><a href="installtoolbox.html">Install Generic Target Toolbox</a></li>
<li class="linav"><a href="preparetarget.html">Prepare Target Computer</a></li>
<li class="linav"><a href="createanddeploy.html">Create and Deploy a Model</a></li>
<li class="linone"></li>
<li class="litext">MATLAB PACKAGE</li>
<li class="linav"><a href="packages_gt_builddrivers.html">GT.BuildDrivers</a></li>
<li class="linav"><a href="packages_gt_decodedatadirectory.html">GT.DecodeDataDirectory</a></li>
<li class="linav"><a href="packages_gt_decodedatafiles.html">GT.DecodeDataFiles</a></li>
<li class="linav"><a href="packages_gt_decodeindexfile.html">GT.DecodeIndexFile</a></li>
<li class="linav"><a href="packages_gt_generictarget.html">GT.GenericTarget (class)</a></li>
<li class="linav"><a href="packages_gt_compilerflags.html">GT.CompilerFlags (class)</a></li>
<li class="linav"><a href="packages_gt_gettemplate.html">GT.GetTemplate</a></li>
<li class="linav"><a href="packages_gt_getversion.html">GT.GetVersion</a></li>
<li class="linav"><a href="packages_gt_opendocumentation.html">GT.OpenDocumentation</a></li>
<li class="linav"><a href="packages_gt_mustbecellstr.html">GT.mustBeCellStr</a></li>
<li class="linav"><a href="packages_gt_mustbechar.html">GT.mustBeChar</a></li>
<li class="linav"><a href="packages_gt_mustbehexstring.html">GT.mustBeHexString</a></li>
<li class="linav"><a href="packages_gt_mustbeunique.html">GT.mustBeUnique</a></li>
<li class="linav"><a href="packages_gt_mustendwith.html">GT.mustEndWith</a></li>
<li class="linone"></li>
<li class="litext">SIMULINK LIBRARY</li>
<li class="linav"><a href="library_gt_interface_udpsend.html">Interface / UDP Send</a></li>
<li class="linav"><a href="library_gt_interface_udpreceive.html">Interface / UDP Receive</a></li>
<li class="linav"><a href="library_gt_interface_writescalardoublestofile.html">Interface / Write Scalar Doubles To File</a></li>
<li class="linav"><a href="library_gt_interface_writebustofile.html">Interface / Write Bus To File</a></li>
<li class="linav"><a href="library_gt_interface_stopexecution.html">Interface / Stop Execution</a></li>
<li class="linav"><a href="library_gt_targetstats_applicationarguments.html">Target Stats / Application Arguments</a></li>
<li class="linav"><a href="library_gt_targetstats_readthermalzones.html">Target Stats / Read Thermal Zones</a></li>
<li class="linav"><a href="library_gt_time_modelexecutiontime.html">Time / Model Execution Time</a></li>
<li class="linav"><a href="library_gt_time_unixtime.html">Time / UNIX Time</a></li>
<li class="linav"><a href="library_gt_time_utctime.html">Time / UTC Time</a></li>
<li class="linav"><a href="library_gt_time_localtime.html">Time / Local Time</a></li>
<li class="linav"><a href="library_gt_time_taskexecutiontime.html">Time / Task Execution Time</a></li>
<li class="linav"><a href="library_gt_time_taskoverloads.html">Time / Task Overloads</a></li>
<li class="linav"><a href="library_gt_time_cpuoverloads.html">Time / CPU Overloads</a></li>
<li class="linav"><a href="library_gt_time_utctimestamp.html">Time / UTC Timestamp</a></li>
<li class="linav"><a href="library_gt_time_timetolatestutctimestamp.html">Time / Time To Latest UTC Timestamp</a></li>
<li class="linav"><a href="library_gt_time_utctimestampmovedon.html">Time / UTC Timestamp Moved On</a></li>
<li class="linone"></li>
<li class="litext">EXAMPLES</li>
<li class="linav"><a href="example_udpreceiveloop.html">Suggested Procedure for UDP Reception</a></li>
<li class="linav"><a href="example_deploymultiplemodels.html">Deploy Multiple Models</a></li>
<li class="linav"><a href="example_debugging.html">Debugging with Visual Studio Code</a></li>
<li class="linone"></li>
<li class="litext">HOW THE APPLICATION WORKS</li>
<li class="linav"><a href="application.html">Application Overview</a></li>
<li class="linav"><a href="timingscheduling.html">Timing & Scheduling</a></li>
<li class="linav"><a href="datarecording.html">Data Recording</a></li>
<li class="linav"><a href="protocolfile.html">Protocol File</a></li>
<li class="linone"></li>
<li class="litext">HOW THE DEPLOYMENT WORKS</li>
<li class="linav"><a href="deployment.html">Deployment Process</a></li>
</ul>

</div>
<div class="content">
    <center><object data="../img/icon.svg" type="image/svg+xml"></object></center>
    <br>

<h1>Generic Target</h1>
    The <b>Generic Target Toolbox</b> allows you to run MATLAB/Simulink models on a target computer in real time.
    Traditional Simulink real-time libraries typically require specific hardware, limiting flexibility in application development.
    Many supported hardware platforms include serial interfaces, digital I/O, AD/DA converters, and CAN bus, but they may be constrained in computing power.
    In many cases, only network interfaces are needed.
    For applications that rely solely on network interfaces, the Generic Target Toolbox enables hardware-agnostic real-time execution of MATLAB/Simulink models.
    Any computer can serve as a target system as long as it runs a Linux operating system with the <b>PREEMPT_RT</b> patch.
    Additionally, using Linux simplifies the integration of extra software libraries.
    The toolbox includes the following components:
    <br>
    <br>
    <center>
    <table style="border:none;" width="90%">
        <tr><td style="border:none;"><img src="../img/MATLABPackage.svg"></td><td width="10px" style="border:none;"></td><td valign="top" style="border:none;">
            <h4>MATLAB Package</h4>
            The MATLAB package (<b>GT</b>) includes the <a href="packages_gt_generictarget.html">GT.GenericTarget</a> class.
            This class is used to generate source code for the Generic Target application based on a Simulink model and deploy it to the target.
            In addition, this class is also used to start and stop the application or download recorded data.
            Furthermore, the (<b>GT</b>) MATLAB package contains functions to read recorded data.
            </td><tr>
        <tr><td style="border:none;"><img src="../img/SimulinkLibrary.svg"></td><td style="border:none;"></td><td valign="top" style="border:none;">
            <h4>Simulink Library</h4>
            The Simulink library contains driver blocks that are used to develop a target application.
            These blocks generally have no effect in a simulation and serve as code placeholders for the target application.
            However, a <a href="installtoolbox.html#simulinksupport">Simulink support</a> is implemented which allows many of the blocks to be used in the simulation (some with limitations).
            </td><tr>
        <tr><td style="border:none;"><img src="../img/TemplateModel.svg"></td><td style="border:none;"></td><td valign="top" style="border:none;">
            <h4>Template Model</h4>
            A Simulink template model is generated using the MATLAB package.
            Based on this model, the software for the Generic Target application can be developed.
            This template is pre-configured with all necessary settings, which are required for automatic code deployment.
            </td><tr>
        <tr><td style="border:none;"><img src="../img/GenericTargetCore.svg"></td><td style="border:none;"></td><td valign="top" style="border:none;">
            <h4>Generic Target Core</h4>
            The toolbox contains build tools and the source code for the core of the realtime application to be deployed to the target computer.
            The source code of the Generic Target Core is compiled on the target computer together with the generated code of the Simulink model.
            </td><tr>
    </table>
    </center>
    <br>

<h2>How It Works</h2>
    A Simulink model should be created using the provided Simulink template.
    In general, all standard blocks that generate generic C/C++ code can be used.
    However, special interface blocks like UDP Receive or Target Scope from the Simulink Real-Time Toolbox are not supported.
    The Generic Target Toolbox includes a dedicated Simulink library with driver blocks.
    To deploy a Simulink model to a target computer, use the MATLAB class <a href="packages_gt_generictarget.html">GT.GenericTarget</a>.
    During deployment, Simulink generates generic C/C++ code, which primarily consists of a class with the following methods:
    <ul>
        <li><code>initialize()</code> - executed once at startup</li>
        <li><code>step()</code> - executed periodically at the defined sampling rate</li>
        <li><code>terminate()</code> - executed when the application stops</li>
    </ul>
    Additionally, the <code>codeInfo.mat</code> file is generated, containing metadata such as sample rates, thread priorities, and function names.
    This information is used to generate a Simulink interface class, which follows a standardized programming interface for integration with the Generic Target Core.
    <br>
    <br>
    <center><object width="95%" data="../img/Overview.svg" type="image/svg+xml"></object></center>
    <br>
    During deployment, both the generated model code and the Generic Target Core source code are transferred to the target computer via SCP.
    The target computer then compiles all sources, with deployment commands sent via SSH.
    The Generic Target Core manages execution of the <code>initialize()</code>, <code>step()</code>, <code>terminate()</code> functions.
    If the model includes multiple sampling rates, multiple <code>step()</code> methods are generated (e.g., <code>step0()</code>, <code>step1()</code>, <code>step2()</code>).
    These are executed in parallel within separate threads, prioritized based on sampling rates - the lower the rate, the higher the priority.


<h2>Notes For Software Development</h2>
    When developing a target software using a Simulink model, some points must be considered to avoid complications in combination with the Generic Target Toolbox.
    Some points seem trivial, others do not seem immediately obvious and can cause problems during code generation and/or compilation on the target.
    Therefore, the following points should be considered for the development of a target application.
    <br>

    <div class="note-green"><h3 class="note-green">Note 1: Use the Simulink template model</h3>
    The MATLAB command <a href="packages_gt_gettemplate.html">GT.GetTemplate</a> generates a Simulink model into the current working directory.
    In this template, all necessary settings are set so that the code generation generates the code in such a way that it can subsequently be used correctly in the automated deployment process.
    If settings are changed that affect code generation, the entire deployment process may stop working.
    Different sample rates are processed in parallel on the target PC in different threads.
    Therefore, the option Allow tasks to execute concurrently on target must be activated in the Simulink settings, for example (Fixed-step solver).
    </div>

    <div class="note-green"><h3 class="note-green">Note 2: Rate-transition block</h3>
    Different samplerates in the model are connected by rate transition blocks.
    On the target computer the threads are executed in concurrence to each other.
    To ensure data integrity, the option <b>Ensure data integrity during data transfer</b> must be enabled in the rate-transition block mask.
    </div>

    <div class="note-green"><h3 class="note-green">Note 3: Fixed application port</h3>
    When the Generic Target application is started, a defined UDP port is bound.
    This port has several functions.
    The application can be terminated with a certain message from the localhost.
    At the same time, an already assigned port means that an application with this port is already running (this can be any application).
    This helps to avoid running the same application multiple times.
    The port itself can be set before code generation using the <a href="packages_gt_generictarget.html#portAppSocket">portAppSocket</a> attribute in the MATLAB class <a href="packages_gt_generictarget.html">GT.GenericTarget</a>.
    Within the Simulink model, the port should no longer be used as a local port, as it would never be successfully bound.
    </div>

    <div class="note-green"><h3 class="note-green">Note 4: Multiple applications</h3>
    If several applications are to run on the same target computer, the application port must be different for each application.
    At the same time, a different software directory must be used, otherwise the software directory of one application will be overwritten when another application is used.
    Both parameters can be set with the <a href="packages_gt_generictarget.html#portAppSocket">portAppSocket</a> and <code>targetSoftwareDirectory</code> attributes in the <a href="packages_gt_generictarget.html">GT.GenericTarget</a> MATLAB class.
    </div>

    <div class="note-green"><h3 class="note-green">Note 5: Avoid keyword "main"</h3>
    During the deployment process, all code generation files are checked for the <code>int_T main(</code> and <code>int main(</code> expressions.
    Files that contain these expressions are removed.
    This is necessary because the Generic Target framework has its own main entry function.
    Since it is not distinguished whether the expressions are in a comment, there is thus the danger that also unintentionally files are removed, which contain these expressions e.g. only in comments or strings.
    Therefore, avoid the use of the keywork main when developing a software.
    </div>

    <div class="note-green"><h3 class="note-green">Note 6: Avoid keyword "DEBUG"</h3>
    If the application is built in DEBUG mode, the C macro <code>DEBUG</code> is set.
    Therefore, no names should be selected that lead to function or variable names with <code>DEBUG</code> in the code generation.
    </div>

    <div class="note-green"><h3 class="note-green">Note 7: Avoid console outputs</h3>
    The console output of the target application is redirected to a text file by default at startup.
    Therefore, many console outputs can result in a large text file.
    Also, the output can come from multiple threads at the same time, so multiple console outputs get mixed up.
    </div>

    <div class="note-green"><h3 class="note-green">Note 8: Legacy Code Tool and custom code: use globally unique file names</h3>
    The legacy code tool can be used to generate a Simulink block directly from a given C/C++ code.
    Most of the blocks in the Generic Target library have been generated using the legacy code tool.
    When generating code for a Simulink model, all code files belonging to blocks generated with the Legacy Code Tool are copied into a single directory.
    If the same file names are used, this will result in the corresponding files being overwritten multiple times.
    Therefore, unique file names should be used.
    The function names within the code files must also not be ambiguous.
    Appropriate naming is recommended.
    The same applies to additional source files that are added as custom code.
    All C functions of blocks from the toolbox start with the prefix <code>GT_</code>.
    </div>

<br><br><br><br>


</div>
</div>
<script src="core/script.js"></script>
</body>
</html>
